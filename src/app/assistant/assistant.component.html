<app-header [creditleft]="countclick"></app-header>

<div class="applayout">
  <div class="sidebarmain">
    <form *ngIf="!limitover">
      <div class="form-group">
        <label>Compose :</label>
        <select [(ngModel)]="composevalue" name="comse" class="form-control" (change)="selectCompose(composevalue)" placeholder="select">
          <option *ngFor="let c of composes" [ngValue]="c">{{c.name}}</option>
        </select>
      </div>
      <div class="form-group" *ngIf="compname == 'Email'">
          <textarea class="form-control" [(ngModel)]="prompt" name="prompt" rows="8" placeholder="Write job Description..."></textarea>
      </div>
      <div class="form-group" *ngIf="compname === 'Job Description'">
          <input class="form-control" [(ngModel)]="prompt" name="prompt" placeholder="Type Job Role" />
      </div>
      <div class="form-group" *ngIf="compname === 'LinkedIn InMail'">
          <textarea class="form-control" [(ngModel)]="prompt" name="prompt" rows="8" placeholder="Write job Description"></textarea>
      </div>
      <div class="form-group" *ngIf="compname === 'SMS Text'">
          <textarea class="form-control" [(ngModel)]="prompt" name="prompt" rows="8" placeholder="Write job Description"></textarea>
      </div>
      <div class="form-group" *ngIf="composevalue">
        <button class="btn btn-primary" type="submit" (click)="composeNow()"> Compose </button>
      </div>
    </form> 
    <div *ngIf="limitover">
        <h3>Your Credits limit over</h3>
        <button mat-raised-button color="primary" [routerLink]="['/account/credits']" routerLinkActive="router-link-active" >Upgrade Now</button>
    </div>
  </div>
  <div class="ressultlayout">
    <div class="loaderwraper" *ngIf="loader">
      <div class="loader"></div>
    </div>
    <div *ngIf="nocomposed" class="no-generation"><img src="assets/images/no-results.png" alt="no result">
      <h2 class="mt-2">No Compose any Document</h2>
      <p>Select Compose option and fill up form and click on Compose button in left side panel</p>
    </div>
    <div class="resultineditor" *ngIf="newDocument">
      <div class="doctitle">
        <button *ngIf="!editoractive" class="savebtn" (click)="saveDocument()"><i class="fa fa-angle-left"></i></button>
        <button *ngIf="editoractive" class="savebtn" (click)="updateDocuments(note)"><i class="fa fa-angle-left"></i></button>
        <div class="titleinput">
          <input type="text" class="titleonly" [(ngModel)]="docnamed" name="docnamed" />
          <i class="fa fa-edit"></i>
        </div>
        <div class="optionsmenu" *ngIf="!limitover">
          <button mat-icon-button [matMenuTriggerFor]="exportmenu">
              <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #exportmenu="matMenu" xPosition="before">
            <button mat-menu-item (click)="download()"><mat-icon>download</mat-icon>Download (.docx) </button>
            <button mat-menu-item (click)="downloadpdfFile()"><mat-icon>download</mat-icon>Download (.pdf)</button>
            <button mat-menu-item (click)="downloadTextFile()"><mat-icon>download</mat-icon>Download (.txt)</button>
          </mat-menu>   
        </div>
      </div>
      <div class="richeditor" id="divprint">
        <angular-editor [(ngModel)]="generatedTexthtml" [config]="editorConfig"></angular-editor>
      </div>
    </div>
    <!-- <div class="documentdetails" *ngIf="editoractive">
      <div class="doctitle">
        <button class="savebtn" (click)="updateDocuments(note)"><i class="fa fa-angle-left"></i></button>
        <div class="titleinput">
          <input type="text" class="titleonly" [(ngModel)]="docnamed" name="docnamed" />
          <i class="fa fa-edit"></i>
        </div>
        <div class="optionsmenu">
          <button mat-icon-button [matMenuTriggerFor]="exportmenu">
              <mat-icon>more_vert</mat-icon>
          </button>
          <mat-menu #exportmenu="matMenu" xPosition="before">
            <button mat-menu-item (click)="download()"><mat-icon>download</mat-icon> Download (.docx) </button>
            <button mat-menu-item (click)="downloadpdfFile()"><mat-icon>download</mat-icon> Download (.pdf)</button>
            <button mat-menu-item (click)="downloadTextFile()"><mat-icon>download</mat-icon> Download (.txt)</button>
          </mat-menu>   
        </div>
      </div>
      <div class="richeditor" id="divprint">
        <angular-editor [(ngModel)]="documenttexts" [config]="editorConfig"></angular-editor>
      </div>
    </div> -->
    <div *ngIf="DocumentData && DocumentData.length > 0">
    <div class="documentlist" *ngIf="!editoractive && !newDocument">
      <div class="doctitle">
        <span>Documents</span>
        <a (click)="addnewDocument()" class="with-icon"><mat-icon>description</mat-icon> New Document</a>
      </div>
      <div class="documentlist mt-4">
        <table class="table">
            <thead>
              <tr>
                <th style="width: 60%;">Name</th>
                <th>Modified</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of DocumentData">
                <td><a (click)="getdocumentDetails(item)"><div class="with-icon"><mat-icon>description</mat-icon> {{item.doctitle}}</div></a></td>
                <td><span class="text-muted">{{item.time}}</span></td>
                <td>
                  <a class="text-dark mr-2 with-icon" (click)="getdocumentDetails(item)">
                    <mat-icon>visibility</mat-icon>
                  </a>
                  <a (click)="deleteDocumentfile(item.key)" class="text-danger with-icon">
                    <mat-icon>delete</mat-icon>
                  </a>
                </td>
              </tr>
            </tbody>
        </table>
      </div>
    </div>
  </div>

  </div>
</div>
